title GOS WebSocket

participant WebSocket Client
participant Access Gateway
participant WebSocket Server

WebSocket Client -> Access Gateway : HTTP Request
activate Access Gateway
Access Gateway --> WebSocket Server : HTTP Upgrade Request
activate WebSocket Server
WebSocket Server --> Access Gateway : HTTP 101 response
deactivate WebSocket Server
Access Gateway ->WebSocket Client : HTTP 101 response
deactivate Access Gateway
loop Connection = True
par Send
WebSocket Client ->Access Gateway: IN Message 
activate Access Gateway
Access Gateway -->WebSocket Server : IN Message
deactivate Access Gateway
thread Recieve
WebSocket Server --> Access Gateway: OUT Message
activate Access Gateway
Access Gateway ->WebSocket Client : OUT Message
deactivate Access Gateway
thread Close
opt Connection
WebSocket Client -> Access Gateway : Close Connection
Access Gateway --> WebSocket Server : Close Connection
end
end
end
